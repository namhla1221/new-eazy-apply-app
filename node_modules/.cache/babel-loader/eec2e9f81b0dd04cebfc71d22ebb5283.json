{"ast":null,"code":"\"use strict\";\n\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _microApiClient = _interopRequireWildcard(require(\"micro-api-client\"));\n\nvar _user = _interopRequireDefault(require(\"./user.js\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction _getRequireWildcardCache() {\n  if (typeof WeakMap !== \"function\") return null;\n  var cache = new WeakMap();\n\n  _getRequireWildcardCache = function _getRequireWildcardCache() {\n    return cache;\n  };\n\n  return cache;\n}\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  }\n\n  if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") {\n    return {\n      \"default\": obj\n    };\n  }\n\n  var cache = _getRequireWildcardCache();\n\n  if (cache && cache.has(obj)) {\n    return cache.get(obj);\n  }\n\n  var newObj = {};\n  var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;\n\n  for (var key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key)) {\n      var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;\n\n      if (desc && (desc.get || desc.set)) {\n        Object.defineProperty(newObj, key, desc);\n      } else {\n        newObj[key] = obj[key];\n      }\n    }\n  }\n\n  newObj[\"default\"] = obj;\n\n  if (cache) {\n    cache.set(obj, newObj);\n  }\n\n  return newObj;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nvar HTTPRegexp = /^http:\\/\\//;\nvar defaultApiURL = \"/.netlify/identity\";\n\nvar GoTrue = /*#__PURE__*/function () {\n  function GoTrue() {\n    var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n        _ref$APIUrl = _ref.APIUrl,\n        APIUrl = _ref$APIUrl === void 0 ? defaultApiURL : _ref$APIUrl,\n        _ref$audience = _ref.audience,\n        audience = _ref$audience === void 0 ? '' : _ref$audience,\n        _ref$setCookie = _ref.setCookie,\n        setCookie = _ref$setCookie === void 0 ? false : _ref$setCookie;\n\n    _classCallCheck(this, GoTrue);\n\n    if (APIUrl.match(HTTPRegexp)) {\n      console.warn('Warning:\\n\\nDO NOT USE HTTP IN PRODUCTION FOR GOTRUE EVER!\\nGoTrue REQUIRES HTTPS to work securely.');\n    }\n\n    if (audience) {\n      this.audience = audience;\n    }\n\n    this.setCookie = setCookie;\n    this.api = new _microApiClient[\"default\"](APIUrl);\n  }\n\n  _createClass(GoTrue, [{\n    key: \"_request\",\n    value: function _request(path) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      options.headers = options.headers || {};\n      var aud = options.audience || this.audience;\n\n      if (aud) {\n        options.headers['X-JWT-AUD'] = aud;\n      }\n\n      return this.api.request(path, options)[\"catch\"](function (error) {\n        if (error instanceof _microApiClient.JSONHTTPError && error.json) {\n          if (error.json.msg) {\n            error.message = error.json.msg;\n          } else if (error.json.error) {\n            error.message = \"\".concat(error.json.error, \": \").concat(error.json.error_description);\n          }\n        }\n\n        return Promise.reject(error);\n      });\n    }\n  }, {\n    key: \"settings\",\n    value: function settings() {\n      return this._request('/settings');\n    }\n  }, {\n    key: \"signup\",\n    value: function signup(email, password, data) {\n      return this._request('/signup', {\n        method: 'POST',\n        body: JSON.stringify({\n          email: email,\n          password: password,\n          data: data\n        })\n      });\n    }\n  }, {\n    key: \"login\",\n    value: function login(email, password, remember) {\n      var _this = this;\n\n      this._setRememberHeaders(remember);\n\n      return this._request('/token', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/x-www-form-urlencoded'\n        },\n        body: \"grant_type=password&username=\".concat(encodeURIComponent(email), \"&password=\").concat(encodeURIComponent(password))\n      }).then(function (response) {\n        _user[\"default\"].removeSavedSession();\n\n        return _this.createUser(response, remember);\n      });\n    }\n  }, {\n    key: \"loginExternalUrl\",\n    value: function loginExternalUrl(provider) {\n      return \"\".concat(this.api.apiURL, \"/authorize?provider=\").concat(provider);\n    }\n  }, {\n    key: \"confirm\",\n    value: function confirm(token, remember) {\n      this._setRememberHeaders(remember);\n\n      return this.verify('signup', token, remember);\n    }\n  }, {\n    key: \"requestPasswordRecovery\",\n    value: function requestPasswordRecovery(email) {\n      return this._request('/recover', {\n        method: 'POST',\n        body: JSON.stringify({\n          email: email\n        })\n      });\n    }\n  }, {\n    key: \"recover\",\n    value: function recover(token, remember) {\n      this._setRememberHeaders(remember);\n\n      return this.verify('recovery', token, remember);\n    }\n  }, {\n    key: \"acceptInvite\",\n    value: function acceptInvite(token, password, remember) {\n      var _this2 = this;\n\n      this._setRememberHeaders(remember);\n\n      return this._request('/verify', {\n        method: 'POST',\n        body: JSON.stringify({\n          token: token,\n          password: password,\n          type: 'signup'\n        })\n      }).then(function (response) {\n        return _this2.createUser(response, remember);\n      });\n    }\n  }, {\n    key: \"acceptInviteExternalUrl\",\n    value: function acceptInviteExternalUrl(provider, token) {\n      return \"\".concat(this.api.apiURL, \"/authorize?provider=\").concat(provider, \"&invite_token=\").concat(token);\n    }\n  }, {\n    key: \"createUser\",\n    value: function createUser(tokenResponse) {\n      var remember = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n      this._setRememberHeaders(remember);\n\n      var user = new _user[\"default\"](this.api, tokenResponse, this.audience);\n      return user.getUserData().then(function (userData) {\n        if (remember) {\n          userData._saveSession();\n        }\n\n        return userData;\n      });\n    }\n  }, {\n    key: \"currentUser\",\n    value: function currentUser() {\n      var user = _user[\"default\"].recoverSession(this.api);\n\n      user && this._setRememberHeaders(user._fromStorage);\n      return user;\n    }\n  }, {\n    key: \"verify\",\n    value: function verify(type, token, remember) {\n      var _this3 = this;\n\n      this._setRememberHeaders(remember);\n\n      return this._request('/verify', {\n        method: 'POST',\n        body: JSON.stringify({\n          token: token,\n          type: type\n        })\n      }).then(function (response) {\n        return _this3.createUser(response, remember);\n      });\n    }\n  }, {\n    key: \"_setRememberHeaders\",\n    value: function _setRememberHeaders(remember) {\n      if (this.setCookie) {\n        this.api.defaultHeaders = this.api.defaultHeaders || {};\n        this.api.defaultHeaders['X-Use-Cookie'] = remember ? '1' : 'session';\n      }\n    }\n  }]);\n\n  return GoTrue;\n}();\n\nexports[\"default\"] = GoTrue;\n\nif (typeof window !== 'undefined') {\n  window.GoTrue = GoTrue;\n}","map":{"version":3,"sources":["/home/namhla/projects/New-Biz-App/node_modules/gotrue-js/lib/index.js"],"names":["_typeof","obj","Symbol","iterator","constructor","prototype","Object","defineProperty","exports","value","_microApiClient","_interopRequireWildcard","require","_user","_interopRequireDefault","__esModule","_getRequireWildcardCache","WeakMap","cache","has","get","newObj","hasPropertyDescriptor","getOwnPropertyDescriptor","key","hasOwnProperty","call","desc","set","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","_createClass","protoProps","staticProps","HTTPRegexp","defaultApiURL","GoTrue","_ref","arguments","undefined","_ref$APIUrl","APIUrl","_ref$audience","audience","_ref$setCookie","setCookie","match","console","warn","api","_request","path","options","headers","aud","request","error","JSONHTTPError","json","msg","message","concat","error_description","Promise","reject","settings","signup","email","password","data","method","body","JSON","stringify","login","remember","_this","_setRememberHeaders","encodeURIComponent","then","response","removeSavedSession","createUser","loginExternalUrl","provider","apiURL","confirm","token","verify","requestPasswordRecovery","recover","acceptInvite","_this2","type","acceptInviteExternalUrl","tokenResponse","user","getUserData","userData","_saveSession","currentUser","recoverSession","_fromStorage","_this3","defaultHeaders","window"],"mappings":"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","sourcesContent":["\"use strict\";\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _microApiClient = _interopRequireWildcard(require(\"micro-api-client\"));\n\nvar _user = _interopRequireDefault(require(\"./user.js\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nfunction _getRequireWildcardCache() { if (typeof WeakMap !== \"function\") return null; var cache = new WeakMap(); _getRequireWildcardCache = function _getRequireWildcardCache() { return cache; }; return cache; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") { return { \"default\": obj }; } var cache = _getRequireWildcardCache(); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj[\"default\"] = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar HTTPRegexp = /^http:\\/\\//;\nvar defaultApiURL = \"/.netlify/identity\";\n\nvar GoTrue = /*#__PURE__*/function () {\n  function GoTrue() {\n    var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n        _ref$APIUrl = _ref.APIUrl,\n        APIUrl = _ref$APIUrl === void 0 ? defaultApiURL : _ref$APIUrl,\n        _ref$audience = _ref.audience,\n        audience = _ref$audience === void 0 ? '' : _ref$audience,\n        _ref$setCookie = _ref.setCookie,\n        setCookie = _ref$setCookie === void 0 ? false : _ref$setCookie;\n\n    _classCallCheck(this, GoTrue);\n\n    if (APIUrl.match(HTTPRegexp)) {\n      console.warn('Warning:\\n\\nDO NOT USE HTTP IN PRODUCTION FOR GOTRUE EVER!\\nGoTrue REQUIRES HTTPS to work securely.');\n    }\n\n    if (audience) {\n      this.audience = audience;\n    }\n\n    this.setCookie = setCookie;\n    this.api = new _microApiClient[\"default\"](APIUrl);\n  }\n\n  _createClass(GoTrue, [{\n    key: \"_request\",\n    value: function _request(path) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      options.headers = options.headers || {};\n      var aud = options.audience || this.audience;\n\n      if (aud) {\n        options.headers['X-JWT-AUD'] = aud;\n      }\n\n      return this.api.request(path, options)[\"catch\"](function (error) {\n        if (error instanceof _microApiClient.JSONHTTPError && error.json) {\n          if (error.json.msg) {\n            error.message = error.json.msg;\n          } else if (error.json.error) {\n            error.message = \"\".concat(error.json.error, \": \").concat(error.json.error_description);\n          }\n        }\n\n        return Promise.reject(error);\n      });\n    }\n  }, {\n    key: \"settings\",\n    value: function settings() {\n      return this._request('/settings');\n    }\n  }, {\n    key: \"signup\",\n    value: function signup(email, password, data) {\n      return this._request('/signup', {\n        method: 'POST',\n        body: JSON.stringify({\n          email: email,\n          password: password,\n          data: data\n        })\n      });\n    }\n  }, {\n    key: \"login\",\n    value: function login(email, password, remember) {\n      var _this = this;\n\n      this._setRememberHeaders(remember);\n\n      return this._request('/token', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/x-www-form-urlencoded'\n        },\n        body: \"grant_type=password&username=\".concat(encodeURIComponent(email), \"&password=\").concat(encodeURIComponent(password))\n      }).then(function (response) {\n        _user[\"default\"].removeSavedSession();\n\n        return _this.createUser(response, remember);\n      });\n    }\n  }, {\n    key: \"loginExternalUrl\",\n    value: function loginExternalUrl(provider) {\n      return \"\".concat(this.api.apiURL, \"/authorize?provider=\").concat(provider);\n    }\n  }, {\n    key: \"confirm\",\n    value: function confirm(token, remember) {\n      this._setRememberHeaders(remember);\n\n      return this.verify('signup', token, remember);\n    }\n  }, {\n    key: \"requestPasswordRecovery\",\n    value: function requestPasswordRecovery(email) {\n      return this._request('/recover', {\n        method: 'POST',\n        body: JSON.stringify({\n          email: email\n        })\n      });\n    }\n  }, {\n    key: \"recover\",\n    value: function recover(token, remember) {\n      this._setRememberHeaders(remember);\n\n      return this.verify('recovery', token, remember);\n    }\n  }, {\n    key: \"acceptInvite\",\n    value: function acceptInvite(token, password, remember) {\n      var _this2 = this;\n\n      this._setRememberHeaders(remember);\n\n      return this._request('/verify', {\n        method: 'POST',\n        body: JSON.stringify({\n          token: token,\n          password: password,\n          type: 'signup'\n        })\n      }).then(function (response) {\n        return _this2.createUser(response, remember);\n      });\n    }\n  }, {\n    key: \"acceptInviteExternalUrl\",\n    value: function acceptInviteExternalUrl(provider, token) {\n      return \"\".concat(this.api.apiURL, \"/authorize?provider=\").concat(provider, \"&invite_token=\").concat(token);\n    }\n  }, {\n    key: \"createUser\",\n    value: function createUser(tokenResponse) {\n      var remember = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n      this._setRememberHeaders(remember);\n\n      var user = new _user[\"default\"](this.api, tokenResponse, this.audience);\n      return user.getUserData().then(function (userData) {\n        if (remember) {\n          userData._saveSession();\n        }\n\n        return userData;\n      });\n    }\n  }, {\n    key: \"currentUser\",\n    value: function currentUser() {\n      var user = _user[\"default\"].recoverSession(this.api);\n\n      user && this._setRememberHeaders(user._fromStorage);\n      return user;\n    }\n  }, {\n    key: \"verify\",\n    value: function verify(type, token, remember) {\n      var _this3 = this;\n\n      this._setRememberHeaders(remember);\n\n      return this._request('/verify', {\n        method: 'POST',\n        body: JSON.stringify({\n          token: token,\n          type: type\n        })\n      }).then(function (response) {\n        return _this3.createUser(response, remember);\n      });\n    }\n  }, {\n    key: \"_setRememberHeaders\",\n    value: function _setRememberHeaders(remember) {\n      if (this.setCookie) {\n        this.api.defaultHeaders = this.api.defaultHeaders || {};\n        this.api.defaultHeaders['X-Use-Cookie'] = remember ? '1' : 'session';\n      }\n    }\n  }]);\n\n  return GoTrue;\n}();\n\nexports[\"default\"] = GoTrue;\n\nif (typeof window !== 'undefined') {\n  window.GoTrue = GoTrue;\n}"]},"metadata":{},"sourceType":"script"}